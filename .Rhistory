) OR (
`SIO2(WT%)` > 44.1 AND `SIO2(WT%)` < 47.1 AND
`NA2O(WT%)` > 1.8 AND `NA2O(WT%)` < 4.8 AND
`K2O(WT%)` > 0 AND `K2O(WT%)` < 2.72 AND
`MGO(WT%)` > 4.15 AND `MGO(WT%)` < 7.15
) OR (
`SIO2(WT%)` > 45.7 AND `SIO2(WT%)` < 48.7 AND
`NA2O(WT%)` > 2.08 AND `NA2O(WT%)` < 5.08 AND
`K2O(WT%)` > 0 AND `K2O(WT%)` < 2.85 AND
`MGO(WT%)` > 3.10 AND `MGO(WT%)` < 6.10
))") %>%
dplyr::filter(grepl("SAMOAN", file_id)) %>%
get_georoc_location() %>% filter(Location != "na") %>%
Ti_from_TiO2() %>% K_from_K2O() %>%
dplyr::mutate(Location = case_when(
grepl("MANUA ISLANDS", LOCATION) ~ "Manua Islands",
grepl("SAVAI", LOCATION) ~ "Savai'i",
grepl("TUTUILA", LOCATION) ~ "Tutuila",
grepl("UPOLU", LOCATION) ~ "Upolu"))
q31 <- dbGetQuery(pofatu,
"SELECT * FROM (
SELECT s.id AS Sample, s.sample_category, s.location_region,
s.location_subregion, s.site_name, s.sample_comment,
s.location_latitude AS lat, s.location_longitude AS long,
max(CASE WHEN m.parameter='SiO2 [%]' then m.value END) AS 'SiO2',
max(CASE WHEN m.parameter='TiO2 [%]' then m.value END) AS 'TiO2',
max(CASE WHEN m.parameter='Al2O3 [%]' then m.value END) AS 'Al2O3',
max(CASE WHEN m.parameter='Fe2O3 [%]' then m.value END) AS 'Fe2O3',
max(CASE WHEN m.parameter='FeO [%]' then m.value END) AS 'FeO',
max(CASE WHEN m.parameter='MnO [%]' then m.value END) AS 'MnO',
max(CASE WHEN m.parameter='MgO [%]' then m.value END) AS 'MgO',
max(CASE WHEN m.parameter='CaO [%]' then m.value END) AS 'CaO',
max(CASE WHEN m.parameter='Na2O [%]' then m.value END) AS 'Na2O',
max(CASE WHEN m.parameter='K2O [%]' then m.value END) AS 'K2O',
max(CASE WHEN m.parameter='Li [ppm]' then m.value END) AS 'Li',
max(CASE WHEN m.parameter='Sc [ppm]' then m.value END) AS 'Sc',
max(CASE WHEN m.parameter='Ti [ppm]' then m.value END) AS 'Ti',
max(CASE WHEN m.parameter='V [ppm]' then m.value END) AS 'V',
max(CASE WHEN m.parameter='Cr [ppm]' then m.value END) AS 'Cr',
max(CASE WHEN m.parameter='Co [ppm]' then m.value END) AS 'Co',
max(CASE WHEN m.parameter='Ni [ppm]' then m.value END) AS 'Ni',
max(CASE WHEN m.parameter='Cu [ppm]' then m.value END) AS 'Cu',
max(CASE WHEN m.parameter='Zn [ppm]' then m.value END) AS 'Zn',
max(CASE WHEN m.parameter='As [ppm]' then m.value END) AS 'As',
max(CASE WHEN m.parameter='Rb [ppm]' then m.value END) AS 'Rb',
max(CASE WHEN m.parameter='Sr [ppm]' then m.value END) AS 'Sr',
max(CASE WHEN m.parameter='Y [ppm]' then m.value END) AS 'Y',
max(CASE WHEN m.parameter='Zr [ppm]' then m.value END) AS 'Zr',
max(CASE WHEN m.parameter='Nb [ppm]' then m.value END) AS 'Nb',
max(CASE WHEN m.parameter='Cd [ppm]' then m.value END) AS 'Cd',
max(CASE WHEN m.parameter='Cs [ppm]' then m.value END) AS 'Cs',
max(CASE WHEN m.parameter='Ba [ppm]' then m.value END) AS 'Ba',
max(CASE WHEN m.parameter='La [ppm]' then m.value END) AS 'La',
max(CASE WHEN m.parameter='Ce [ppm]' then m.value END) AS 'Ce',
max(CASE WHEN m.parameter='Pr [ppm]' then m.value END) AS 'Pr',
max(CASE WHEN m.parameter='Nd [ppm]' then m.value END) AS 'Nd',
max(CASE WHEN m.parameter='Sm [ppm]' then m.value END) AS 'Sm',
max(CASE WHEN m.parameter='Eu [ppm]' then m.value END) AS 'Eu',
max(CASE WHEN m.parameter='Gd [ppm]' then m.value END) AS 'Gd',
max(CASE WHEN m.parameter='Tb [ppm]' then m.value END) AS 'Tb',
max(CASE WHEN m.parameter='Dy [ppm]' then m.value END) AS 'Dy',
max(CASE WHEN m.parameter='Ho [ppm]' then m.value END) AS 'Ho',
max(CASE WHEN m.parameter='Er [ppm]' then m.value END) AS 'Er',
max(CASE WHEN m.parameter='Tm [ppm]' then m.value END) AS 'Tm',
max(CASE WHEN m.parameter='Yb [ppm]' then m.value END) AS 'Yb',
max(CASE WHEN m.parameter='Lu [ppm]' then m.value END) AS 'Lu',
max(CASE WHEN m.parameter='Hf [ppm]' then m.value END) AS 'Hf',
max(CASE WHEN m.parameter='Ta [ppm]' then m.value END) AS 'Ta',
max(CASE WHEN m.parameter='Tl [ppm]' then m.value END) AS 'Tl',
max(CASE WHEN m.parameter='Pb [ppm]' then m.value END) AS 'Pb',
max(CASE WHEN m.parameter='Th [ppm]' then m.value END) AS 'Th',
max(CASE WHEN m.parameter='U [ppm]' then m.value END) AS 'U',
max(CASE WHEN m.parameter='Nd143_Nd144' then m.value END) AS 'Nd143_Nd144',
max(CASE WHEN m.parameter='Sr87_Sr86' then m.value END) AS 'Sr87_Sr86',
max(CASE WHEN m.parameter='Pb206_Pb204' then m.value END) AS 'Pb206_Pb204',
max(CASE WHEN m.parameter='Pb207_Pb204' then m.value END) AS 'Pb207_Pb204',
max(CASE WHEN m.parameter='Pb208_Pb204' then m.value END) AS 'Pb208_Pb204'
FROM 'samples.csv' AS s JOIN 'measurements.csv' AS m ON s.id=m.sample_id
WHERE location_region = 'SAMOA' AND
m.parameter IN ('SiO2 [%]', 'TiO2 [%]', 'Al2O3 [%]', 'Fe2O3 [%]', 'FeO [%]',
'MnO [%]', 'MgO [%]', 'CaO [%]', 'Na2O [%]', 'K2O [%]',
'Li [ppm]', 'Sc [ppm]', 'Ti [ppm]', 'V [ppm]', 'Cr [ppm]',
'Co [ppm]', 'Ni [ppm]', 'Cu [ppm]', 'Zn [ppm]', 'As [ppm]',
'Rb [ppm]', 'Sr [ppm]', 'Y [ppm]', 'Zr [ppm]', 'Nb [ppm]',
'Cd [ppm]', 'Cs [ppm]', 'Ba [ppm]', 'La [ppm]', 'Ce [ppm]',
'Pr [ppm]', 'Nd [ppm]', 'Sm [ppm]', 'Eu [ppm]', 'Gd [ppm]',
'Tb [ppm]', 'Dy [ppm]', 'Ho [ppm]', 'Er [ppm]', 'Tm [ppm]',
'Yb [ppm]', 'Lu [ppm]', 'Hf [ppm]', 'Ta [ppm]', 'Tl [ppm]',
'Pb [ppm]', 'Th [ppm]', 'U [ppm]', 'Nd143_Nd144',
'Sr87_Sr86', 'Pb206_Pb204', 'Pb207_Pb204', 'Pb208_Pb204')
GROUP BY sample_id) AS Q31 WHERE
(
(
SiO2 > 45.2 AND SiO2 < 48.2 AND
Na2O > 2.08 AND Na2O < 5.08 AND
K2O > 0 AND K2O < 2.9 AND
MgO > 3.08 AND MgO < 6.08
) OR (
SiO2 > 44.3 AND SiO2 < 47.3 AND
Na2O > 2 AND Na2O < 5 AND
K2O > 0 AND K2O < 2.82 AND
MgO > 3.52 AND MgO < 6.52
) OR (
SiO2 > 43.5 AND SiO2 < 46.5 AND
Na2O > 1.9 AND Na2O < 4.9 AND
K2O > 0 AND K2O < 2.78 AND
MgO > 3.79 AND MgO < 6.79
) OR (
SiO2 > 45.9 AND SiO2 < 48.9 AND
Na2O > 2.18 AND Na2O < 5.18 AND
K2O > 0 AND K2O < 2.99 AND
MgO > 3.44 AND MgO < 6.44
) OR (
SiO2 > 44.1 AND SiO2 < 47.1 AND
Na2O > 1.8 AND Na2O < 4.8 AND
K2O > 0 AND K2O < 2.72 AND
MgO > 4.15 AND MgO < 7.15
) OR (
SiO2 > 45.7 AND SiO2 < 48.7 AND
Na2O > 2.08 AND Na2O < 5.08 AND
K2O > 0 AND K2O < 2.85 AND
MgO > 3.10 AND MgO < 6.10
))") %>%
Ti_from_TiO2() %>% K_from_K2O() %>%
dplyr::mutate(Location = case_when(
location_subregion=="TUTUILA" ~ "Tutuila",
location_subregion=="SAVAI'I" ~ "Savai'i",
location_subregion=="OFU" ~ "Manua Islands"))
q32 <- dbGetQuery(georoc,
"SELECT id AS Sample, file_id, LOCATION, LATITUDE_MAX AS lat, LONGITUDE_MAX AS long,
`SIO2(WT%)`AS SiO2, `TIO2(WT%)` AS TiO2, `MGO(WT%)`AS MgO,
`K2O(WT%)`AS K2O, `NA2O(WT%)`AS Na2O,
`CS(PPM)` AS Cs, `RB(PPM)` AS Rb, `BA(PPM)` AS Ba, `TH(PPM)` AS Th,
`U(PPM)` AS U, `NB(PPM)` AS Nb, `TA(PPM)` AS Ta, `LA(PPM)` AS La,
`CE(PPM)` AS Ce, `PR(PPM)` AS Pr, `ND(PPM)` AS Nd, `SR(PPM)` AS Sr,
`SM(PPM)` AS Sm, `ZR(PPM)` AS Zr, `TI(PPM)` AS Ti, `EU(PPM)` AS Eu,
`GD(PPM)` AS Gd, `TB(PPM)` AS Tb, `DY(PPM)` AS Dy, `Y(PPM)` AS Y,
`ER(PPM)` AS Er, `YB(PPM)` AS Yb, `LU(PPM)` AS Lu
FROM 'sample'
WHERE LAND_OR_SEA='SAE' AND ROCK_TYPE='VOL' AND
`NA2O(WT%)` > 1.61 AND `NA2O(WT%)` < 4.61 AND
`K2O(WT%)` > 0 AND `K2O(WT%)` < 2.91 AND
file_id = '2022-06-WFJZKY_CAROLINE_ISLANDS.csv'
") %>%
Ti_from_TiO2() %>% K_from_K2O() %>%
dplyr::mutate(Location = case_when(
grepl("PONAPE", LOCATION) ~ "Ponape",
grepl("KUSAIE", LOCATION) ~ "Kosrae",
grepl("KOSRAE", LOCATION) ~ "Kosrae",
grepl("CHUUK", LOCATION) ~ "Chuuk")) %>% dplyr::filter(Location != "NA")
q33 <- dbGetQuery(georoc,
"SELECT id AS Sample, file_id, LOCATION, LATITUDE_MAX AS lat, LONGITUDE_MAX AS long,
`SIO2(WT%)`AS SiO2, `TIO2(WT%)` AS TiO2, `MGO(WT%)`AS MgO,
`K2O(WT%)`AS K2O, `NA2O(WT%)`AS Na2O,
`CS(PPM)` AS Cs, `RB(PPM)` AS Rb, `BA(PPM)` AS Ba, `TH(PPM)` AS Th,
`U(PPM)` AS U, `NB(PPM)` AS Nb, `TA(PPM)` AS Ta, `LA(PPM)` AS La,
`CE(PPM)` AS Ce, `PR(PPM)` AS Pr, `ND(PPM)` AS Nd, `SR(PPM)` AS Sr,
`SM(PPM)` AS Sm, `ZR(PPM)` AS Zr, `TI(PPM)` AS Ti, `EU(PPM)` AS Eu,
`GD(PPM)` AS Gd, `TB(PPM)` AS Tb, `DY(PPM)` AS Dy, `Y(PPM)` AS Y,
`ER(PPM)` AS Er, `YB(PPM)` AS Yb, `LU(PPM)` AS Lu
FROM 'sample'
WHERE LAND_OR_SEA = 'SAE' AND ROCK_TYPE='VOL' AND
`SIO2(WT%)` > 43.1 AND `SIO2(WT%)` < 46.1 AND
`NA2O(WT%)` > 0.89 AND `NA2O(WT%)` < 3.89 AND
file_id = '2022-06-WFJZKY_CAROLINE_ISLANDS.csv'
") %>%
Ti_from_TiO2() %>% K_from_K2O() %>%
dplyr::mutate(Location = case_when(
grepl("PONAPE", LOCATION) ~ "Ponape",
grepl("KUSAIE", LOCATION) ~ "Kosrae",
grepl("KOSRAE", LOCATION) ~ "Kosrae",
grepl("CHUUK", LOCATION) ~ "Chuuk")) %>% dplyr::filter(Location != "NA")
q34 <- dbGetQuery(georoc,
"SELECT id AS Sample, file_id, LOCATION, LATITUDE_MAX AS lat, LONGITUDE_MAX AS long,
`SIO2(WT%)`AS SiO2, `TIO2(WT%)` AS TiO2, `MGO(WT%)`AS MgO,
`K2O(WT%)`AS K2O, `NA2O(WT%)`AS Na2O,
`CS(PPM)` AS Cs, `RB(PPM)` AS Rb, `BA(PPM)` AS Ba, `TH(PPM)` AS Th,
`U(PPM)` AS U, `NB(PPM)` AS Nb, `TA(PPM)` AS Ta, `LA(PPM)` AS La,
`CE(PPM)` AS Ce, `PR(PPM)` AS Pr, `ND(PPM)` AS Nd, `SR(PPM)` AS Sr,
`SM(PPM)` AS Sm, `ZR(PPM)` AS Zr, `TI(PPM)` AS Ti, `EU(PPM)` AS Eu,
`GD(PPM)` AS Gd, `TB(PPM)` AS Tb, `DY(PPM)` AS Dy, `Y(PPM)` AS Y,
`ER(PPM)` AS Er, `YB(PPM)` AS Yb, `LU(PPM)` AS Lu
FROM 'sample'
WHERE LAND_OR_SEA = 'SAE' AND ROCK_TYPE='VOL' AND
`SIO2(WT%)` > 42.9 AND `SIO2(WT%)` < 45.9 AND
`NA2O(WT%)` > 2.41 AND `NA2O(WT%)` < 5.41 AND
file_id = '2022-06-WFJZKY_CAROLINE_ISLANDS.csv'
") %>%
Ti_from_TiO2() %>% K_from_K2O()  %>%
dplyr::mutate(Location = case_when(
grepl("PONAPE", LOCATION) ~ "Ponape",
grepl("KUSAIE", LOCATION) ~ "Kosrae",
grepl("KOSRAE", LOCATION) ~ "Kosrae",
grepl("CHUUK", LOCATION) ~ "Chuuk")) %>% dplyr::filter(Location != "NA")
#### Fig S17 ####
q35 <- dbGetQuery(pofatu,
"SELECT id AS Sample, sample_category,
location_subregion, site_name, sample_comment,
location_latitude AS lat, location_longitude AS long
FROM 'samples.csv'
WHERE location_subregion = 'TUTUILA'")
#### Fig S18 ####
q36 <- dbGetQuery(pofatu,
"SELECT s.id AS Sample, s.sample_category,
s.location_subregion, s.site_name, s.sample_comment,
s.location_latitude AS lat, s.location_longitude AS long,
max(CASE WHEN m.parameter='SiO2 [%]' then m.value END) AS 'SiO2',
max(CASE WHEN m.parameter='TiO2 [%]' then m.value END) AS 'TiO2',
max(CASE WHEN m.parameter='Al2O3 [%]' then m.value END) AS 'Al2O3',
max(CASE WHEN m.parameter='Fe2O3 [%]' then m.value END) AS 'Fe2O3',
max(CASE WHEN m.parameter='FeO [%]' then m.value END) AS 'FeO',
max(CASE WHEN m.parameter='MnO [%]' then m.value END) AS 'MnO',
max(CASE WHEN m.parameter='MgO [%]' then m.value END) AS 'MgO',
max(CASE WHEN m.parameter='CaO [%]' then m.value END) AS 'CaO',
max(CASE WHEN m.parameter='Na2O [%]' then m.value END) AS 'Na2O',
max(CASE WHEN m.parameter='K2O [%]' then m.value END) AS 'K2O',
max(CASE WHEN m.parameter='Li [ppm]' then m.value END) AS 'Li',
max(CASE WHEN m.parameter='Sc [ppm]' then m.value END) AS 'Sc',
max(CASE WHEN m.parameter='Ti [ppm]' then m.value END) AS 'Ti',
max(CASE WHEN m.parameter='V [ppm]' then m.value END) AS 'V',
max(CASE WHEN m.parameter='Cr [ppm]' then m.value END) AS 'Cr',
max(CASE WHEN m.parameter='Co [ppm]' then m.value END) AS 'Co',
max(CASE WHEN m.parameter='Ni [ppm]' then m.value END) AS 'Ni',
max(CASE WHEN m.parameter='Cu [ppm]' then m.value END) AS 'Cu',
max(CASE WHEN m.parameter='Zn [ppm]' then m.value END) AS 'Zn',
max(CASE WHEN m.parameter='As [ppm]' then m.value END) AS 'As',
max(CASE WHEN m.parameter='Rb [ppm]' then m.value END) AS 'Rb',
max(CASE WHEN m.parameter='Sr [ppm]' then m.value END) AS 'Sr',
max(CASE WHEN m.parameter='Y [ppm]' then m.value END) AS 'Y',
max(CASE WHEN m.parameter='Zr [ppm]' then m.value END) AS 'Zr',
max(CASE WHEN m.parameter='Nb [ppm]' then m.value END) AS 'Nb',
max(CASE WHEN m.parameter='Cd [ppm]' then m.value END) AS 'Cd',
max(CASE WHEN m.parameter='Cs [ppm]' then m.value END) AS 'Cs',
max(CASE WHEN m.parameter='Ba [ppm]' then m.value END) AS 'Ba',
max(CASE WHEN m.parameter='La [ppm]' then m.value END) AS 'La',
max(CASE WHEN m.parameter='Ce [ppm]' then m.value END) AS 'Ce',
max(CASE WHEN m.parameter='Pr [ppm]' then m.value END) AS 'Pr',
max(CASE WHEN m.parameter='Nd [ppm]' then m.value END) AS 'Nd',
max(CASE WHEN m.parameter='Sm [ppm]' then m.value END) AS 'Sm',
max(CASE WHEN m.parameter='Eu [ppm]' then m.value END) AS 'Eu',
max(CASE WHEN m.parameter='Gd [ppm]' then m.value END) AS 'Gd',
max(CASE WHEN m.parameter='Tb [ppm]' then m.value END) AS 'Tb',
max(CASE WHEN m.parameter='Dy [ppm]' then m.value END) AS 'Dy',
max(CASE WHEN m.parameter='Ho [ppm]' then m.value END) AS 'Ho',
max(CASE WHEN m.parameter='Er [ppm]' then m.value END) AS 'Er',
max(CASE WHEN m.parameter='Tm [ppm]' then m.value END) AS 'Tm',
max(CASE WHEN m.parameter='Yb [ppm]' then m.value END) AS 'Yb',
max(CASE WHEN m.parameter='Lu [ppm]' then m.value END) AS 'Lu',
max(CASE WHEN m.parameter='Hf [ppm]' then m.value END) AS 'Hf',
max(CASE WHEN m.parameter='Ta [ppm]' then m.value END) AS 'Ta',
max(CASE WHEN m.parameter='Tl [ppm]' then m.value END) AS 'Tl',
max(CASE WHEN m.parameter='Pb [ppm]' then m.value END) AS 'Pb',
max(CASE WHEN m.parameter='Th [ppm]' then m.value END) AS 'Th',
max(CASE WHEN m.parameter='U [ppm]' then m.value END) AS 'U',
max(CASE WHEN m.parameter='Nd143_Nd144' then m.value END) AS 'Nd143_Nd144',
max(CASE WHEN m.parameter='Sr87_Sr86' then m.value END) AS 'Sr87_Sr86',
max(CASE WHEN m.parameter='Pb206_Pb204' then m.value END) AS 'Pb206_Pb204',
max(CASE WHEN m.parameter='Pb207_Pb204' then m.value END) AS 'Pb207_Pb204',
max(CASE WHEN m.parameter='Pb208_Pb204' then m.value END) AS 'Pb208_Pb204'
FROM 'samples.csv' AS s JOIN 'measurements.csv' AS m ON s.id=m.sample_id
WHERE location_subregion = 'TUTUILA' AND
m.parameter IN ('SiO2 [%]', 'TiO2 [%]', 'Al2O3 [%]', 'Fe2O3 [%]', 'FeO [%]',
'MnO [%]', 'MgO [%]', 'CaO [%]', 'Na2O [%]', 'K2O [%]',
'Li [ppm]', 'Sc [ppm]', 'Ti [ppm]', 'V [ppm]',
'Cr [ppm]', 'Co [ppm]', 'Ni [ppm]', 'Cu [ppm]', 'Zn [ppm]', 'As [ppm]',
'Rb [ppm]', 'Sr [ppm]', 'Y [ppm]', 'Zr [ppm]', 'Nb [ppm]', 'Cd [ppm]',
'Cs [ppm]', 'Ba [ppm]', 'La [ppm]', 'Ce [ppm]', 'Pr [ppm]', 'Nd [ppm]',
'Sm [ppm]', 'Eu [ppm]', 'Gd [ppm]', 'Tb [ppm]', 'Dy [ppm]', 'Ho [ppm]',
'Er [ppm]', 'Tm [ppm]', 'Yb [ppm]', 'Lu [ppm]', 'Hf [ppm]', 'Ta [ppm]',
'Tl [ppm]', 'Pb [ppm]', 'Th [ppm]', 'U [ppm]', 'Nd143_Nd144', 'Sr87_Sr86',
'Pb206_Pb204', 'Pb207_Pb204', 'Pb208_Pb204') GROUP BY sample_id") %>%
Ti_from_TiO2() %>% K_from_K2O() %>% Fe2O3_from_FeO()
#### Fig S19 ####
q37 <- dbGetQuery(pofatu,
"SELECT * FROM (
SELECT
s.id AS Sample, s.sample_category,
s.location_subregion, s.site_name, s.sample_comment,
s.location_latitude AS lat, s.location_longitude AS long,
max(CASE WHEN m.parameter='SiO2 [%]' then m.value END) AS 'SiO2',
max(CASE WHEN m.parameter='TiO2 [%]' then m.value END) AS 'TiO2',
max(CASE WHEN m.parameter='Al2O3 [%]' then m.value END) AS 'Al2O3',
max(CASE WHEN m.parameter='Fe2O3 [%]' then m.value END) AS 'Fe2O3',
max(CASE WHEN m.parameter='FeO [%]' then m.value END) AS 'FeO',
max(CASE WHEN m.parameter='MnO [%]' then m.value END) AS 'MnO',
max(CASE WHEN m.parameter='MgO [%]' then m.value END) AS 'MgO',
max(CASE WHEN m.parameter='CaO [%]' then m.value END) AS 'CaO',
max(CASE WHEN m.parameter='Na2O [%]' then m.value END) AS 'Na2O',
max(CASE WHEN m.parameter='K2O [%]' then m.value END) AS 'K2O',
max(CASE WHEN m.parameter='Li [ppm]' then m.value END) AS 'Li',
max(CASE WHEN m.parameter='Sc [ppm]' then m.value END) AS 'Sc',
max(CASE WHEN m.parameter='Ti [ppm]' then m.value END) AS 'Ti',
max(CASE WHEN m.parameter='V [ppm]' then m.value END) AS 'V',
max(CASE WHEN m.parameter='Cr [ppm]' then m.value END) AS 'Cr',
max(CASE WHEN m.parameter='Co [ppm]' then m.value END) AS 'Co',
max(CASE WHEN m.parameter='Ni [ppm]' then m.value END) AS 'Ni',
max(CASE WHEN m.parameter='Cu [ppm]' then m.value END) AS 'Cu',
max(CASE WHEN m.parameter='Zn [ppm]' then m.value END) AS 'Zn',
max(CASE WHEN m.parameter='As [ppm]' then m.value END) AS 'As',
max(CASE WHEN m.parameter='Rb [ppm]' then m.value END) AS 'Rb',
max(CASE WHEN m.parameter='Sr [ppm]' then m.value END) AS 'Sr',
max(CASE WHEN m.parameter='Y [ppm]' then m.value END) AS 'Y',
max(CASE WHEN m.parameter='Zr [ppm]' then m.value END) AS 'Zr',
max(CASE WHEN m.parameter='Nb [ppm]' then m.value END) AS 'Nb',
max(CASE WHEN m.parameter='Cd [ppm]' then m.value END) AS 'Cd',
max(CASE WHEN m.parameter='Cs [ppm]' then m.value END) AS 'Cs',
max(CASE WHEN m.parameter='Ba [ppm]' then m.value END) AS 'Ba',
max(CASE WHEN m.parameter='La [ppm]' then m.value END) AS 'La',
max(CASE WHEN m.parameter='Ce [ppm]' then m.value END) AS 'Ce',
max(CASE WHEN m.parameter='Pr [ppm]' then m.value END) AS 'Pr',
max(CASE WHEN m.parameter='Nd [ppm]' then m.value END) AS 'Nd',
max(CASE WHEN m.parameter='Sm [ppm]' then m.value END) AS 'Sm',
max(CASE WHEN m.parameter='Eu [ppm]' then m.value END) AS 'Eu',
max(CASE WHEN m.parameter='Gd [ppm]' then m.value END) AS 'Gd',
max(CASE WHEN m.parameter='Tb [ppm]' then m.value END) AS 'Tb',
max(CASE WHEN m.parameter='Dy [ppm]' then m.value END) AS 'Dy',
max(CASE WHEN m.parameter='Ho [ppm]' then m.value END) AS 'Ho',
max(CASE WHEN m.parameter='Er [ppm]' then m.value END) AS 'Er',
max(CASE WHEN m.parameter='Tm [ppm]' then m.value END) AS 'Tm',
max(CASE WHEN m.parameter='Yb [ppm]' then m.value END) AS 'Yb',
max(CASE WHEN m.parameter='Lu [ppm]' then m.value END) AS 'Lu',
max(CASE WHEN m.parameter='Hf [ppm]' then m.value END) AS 'Hf',
max(CASE WHEN m.parameter='Ta [ppm]' then m.value END) AS 'Ta',
max(CASE WHEN m.parameter='Tl [ppm]' then m.value END) AS 'Tl',
max(CASE WHEN m.parameter='Pb [ppm]' then m.value END) AS 'Pb',
max(CASE WHEN m.parameter='Th [ppm]' then m.value END) AS 'Th',
max(CASE WHEN m.parameter='U [ppm]' then m.value END) AS 'U',
max(CASE WHEN m.parameter='Nd143_Nd144' then m.value END) AS 'Nd143_Nd144',
max(CASE WHEN m.parameter='Sr87_Sr86' then m.value END) AS 'Sr87_Sr86',
max(CASE WHEN m.parameter='Pb206_Pb204' then m.value END) AS 'Pb206_Pb204',
max(CASE WHEN m.parameter='Pb207_Pb204' then m.value END) AS 'Pb207_Pb204',
max(CASE WHEN m.parameter='Pb208_Pb204' then m.value END) AS 'Pb208_Pb204'
FROM 'samples.csv' AS s JOIN 'measurements.csv' AS m ON s.id=m.sample_id
WHERE m.parameter IN ('SiO2 [%]', 'TiO2 [%]', 'Al2O3 [%]', 'Fe2O3 [%]', 'FeO [%]',
'MnO [%]', 'MgO [%]', 'CaO [%]', 'Na2O [%]', 'K2O [%]',
'Li [ppm]', 'Sc [ppm]', 'Ti [ppm]', 'V [ppm]',
'Cr [ppm]', 'Co [ppm]', 'Ni [ppm]', 'Cu [ppm]', 'Zn [ppm]', 'As [ppm]',
'Rb [ppm]', 'Sr [ppm]', 'Y [ppm]', 'Zr [ppm]', 'Nb [ppm]', 'Cd [ppm]',
'Cs [ppm]', 'Ba [ppm]', 'La [ppm]', 'Ce [ppm]', 'Pr [ppm]', 'Nd [ppm]',
'Sm [ppm]', 'Eu [ppm]', 'Gd [ppm]', 'Tb [ppm]', 'Dy [ppm]', 'Ho [ppm]',
'Er [ppm]', 'Tm [ppm]', 'Yb [ppm]', 'Lu [ppm]', 'Hf [ppm]', 'Ta [ppm]',
'Tl [ppm]', 'Pb [ppm]', 'Th [ppm]', 'U [ppm]', 'Nd143_Nd144', 'Sr87_Sr86',
'Pb206_Pb204', 'Pb207_Pb204', 'Pb208_Pb204')
GROUP BY sample_id) WHERE
(Sample = 'best1992_TAU48' OR Sample = 'best1992_TAU49' OR
Sample = 'best1992_TAU52' OR Sample = 'best1992_TAU54' OR
Sample = 'best1992_TOK-A2' OR Sample = 'best1992_COOK-1' OR
Sample = 'best1992_BB-8-4-4(A)' OR Sample = 'best1992_TOK-A2' OR
Sample = 'allen1997_5' OR Sample = 'allen1997_6' OR
Sample = 'weisler2016a_2009-369' OR Sample = 'clark2014_36' OR
Sample = 'clark2014_51' OR Sample = 'clark2014_53' OR
Sample = 'clark2014_54' OR Sample = 'clark2014_241' OR
Sample = 'clark2014_678' OR Sample = 'clark2014_683' OR
Sample = 'clark2014_707')") %>%
Ti_from_TiO2() %>% K_from_K2O() %>% Fe2O3_from_FeO()
#### Fig S18 ####
OIB <- q36
OIB %>% group_by(site_name) %>% tally() %>% print(n=30)
OIB <- OIB %>%
dplyr::mutate(Category = case_when(
grepl("Artefact", sample_comment) ~ "artefact",
sample_category == "SOURCE" ~ "source",
sample_category == "ARTEFACT" ~ "artefact")) %>%
dplyr::mutate(Location = case_when(
site_name == "Tatagamatau" & Category == "source" ~ "Tatagamatau-source",
site_name == "Tatagamatau" & Category == "artefact" ~ "Tatagamatau-artefact",
grepl("MALAELOA", Sample) & Category == "source" ~ "Malaeloa-source",
grepl("MALAELOA", Sample) & Category == "artefact" ~ "Malaeloa-artefact",
grepl("MALOATA", Sample) & Category == "source" ~ "Maloata-source",
grepl("MALOATA", Sample) & Category == "artefact" ~ "Maloata-artefact",
TRUE ~ "Tutuila")) %>%
dplyr::select(
Sample,Location,Category,lat,long,SiO2,TiO2,Al2O3,Fe2O3,MnO,MgO,CaO,Na2O,K2O,
Li,Sc,Ti,V,Cr,Co,Ni,Cu,Zn,As,Rb,Sr,Y,Zr,Nb,Cd,Cs,Ba,La,Ce,Pr,Nd,
Sm,Eu,Gd,Tb,Dy,Ho,Er,Tm,Yb,Lu,Hf,Ta,Pb,Th,U,K,
Sr87_Sr86,Nd143_Nd144,Pb206_Pb204,Pb207_Pb204,Pb208_Pb204)
OIB %>% dplyr::select(Sample, Location, Category)
OIB[OIB == 0] <- NA # Replace 0 with NA
s <- joined_data %>% dplyr::filter(Sample %in% c(
"E-11-08","T-12-06","T-12-07","T-12-08","T-12-09","T-12-10")) %>%
mutate(Location = case_when(
grepl("E-11-08", Sample) ~ "E-11-08",
grepl("T-12-06", Sample) ~ "T-12-06",
grepl("T-12-07", Sample) ~ "T-12-07",
grepl("T-12-08", Sample) ~ "T-12-08",
grepl("T-12-09", Sample) ~ "T-12-09",
grepl("T-12-10", Sample) ~ "T-12-10"))
View(s)
View(OIB)
OIB %>% select("Sample","Location","Nb")
OIB %>% select("Sample","Location","Nb") %>% order(OIB$Nb)
OIB %>% select("Sample","Location","Nb") %>% order(OIB$"Nb")
OIB %>% select("Sample","Location","Nb") %>% order("Nb")
OIB %>% select("Sample","Location","Nb") %>% order()
order(OIB$Nb)
OIB[order(OIB$Nb, decreasing = TRUE), ]
OIB[order(OIB$Nb, decreasing = TRUE), ]%>% select("Sample","Location","Nb")
q36
View(q36)
#### Fig S18 ####
q36 <- dbGetQuery(pofatu,
"SELECT s.id AS Sample, s.sample_category,
s.location_subregion, s.site_name, s.site_comment, s.sample_comment,
s.location_latitude AS lat, s.location_longitude AS long,
max(CASE WHEN m.parameter='SiO2 [%]' then m.value END) AS 'SiO2',
max(CASE WHEN m.parameter='TiO2 [%]' then m.value END) AS 'TiO2',
max(CASE WHEN m.parameter='Al2O3 [%]' then m.value END) AS 'Al2O3',
max(CASE WHEN m.parameter='Fe2O3 [%]' then m.value END) AS 'Fe2O3',
max(CASE WHEN m.parameter='FeO [%]' then m.value END) AS 'FeO',
max(CASE WHEN m.parameter='MnO [%]' then m.value END) AS 'MnO',
max(CASE WHEN m.parameter='MgO [%]' then m.value END) AS 'MgO',
max(CASE WHEN m.parameter='CaO [%]' then m.value END) AS 'CaO',
max(CASE WHEN m.parameter='Na2O [%]' then m.value END) AS 'Na2O',
max(CASE WHEN m.parameter='K2O [%]' then m.value END) AS 'K2O',
max(CASE WHEN m.parameter='Li [ppm]' then m.value END) AS 'Li',
max(CASE WHEN m.parameter='Sc [ppm]' then m.value END) AS 'Sc',
max(CASE WHEN m.parameter='Ti [ppm]' then m.value END) AS 'Ti',
max(CASE WHEN m.parameter='V [ppm]' then m.value END) AS 'V',
max(CASE WHEN m.parameter='Cr [ppm]' then m.value END) AS 'Cr',
max(CASE WHEN m.parameter='Co [ppm]' then m.value END) AS 'Co',
max(CASE WHEN m.parameter='Ni [ppm]' then m.value END) AS 'Ni',
max(CASE WHEN m.parameter='Cu [ppm]' then m.value END) AS 'Cu',
max(CASE WHEN m.parameter='Zn [ppm]' then m.value END) AS 'Zn',
max(CASE WHEN m.parameter='As [ppm]' then m.value END) AS 'As',
max(CASE WHEN m.parameter='Rb [ppm]' then m.value END) AS 'Rb',
max(CASE WHEN m.parameter='Sr [ppm]' then m.value END) AS 'Sr',
max(CASE WHEN m.parameter='Y [ppm]' then m.value END) AS 'Y',
max(CASE WHEN m.parameter='Zr [ppm]' then m.value END) AS 'Zr',
max(CASE WHEN m.parameter='Nb [ppm]' then m.value END) AS 'Nb',
max(CASE WHEN m.parameter='Cd [ppm]' then m.value END) AS 'Cd',
max(CASE WHEN m.parameter='Cs [ppm]' then m.value END) AS 'Cs',
max(CASE WHEN m.parameter='Ba [ppm]' then m.value END) AS 'Ba',
max(CASE WHEN m.parameter='La [ppm]' then m.value END) AS 'La',
max(CASE WHEN m.parameter='Ce [ppm]' then m.value END) AS 'Ce',
max(CASE WHEN m.parameter='Pr [ppm]' then m.value END) AS 'Pr',
max(CASE WHEN m.parameter='Nd [ppm]' then m.value END) AS 'Nd',
max(CASE WHEN m.parameter='Sm [ppm]' then m.value END) AS 'Sm',
max(CASE WHEN m.parameter='Eu [ppm]' then m.value END) AS 'Eu',
max(CASE WHEN m.parameter='Gd [ppm]' then m.value END) AS 'Gd',
max(CASE WHEN m.parameter='Tb [ppm]' then m.value END) AS 'Tb',
max(CASE WHEN m.parameter='Dy [ppm]' then m.value END) AS 'Dy',
max(CASE WHEN m.parameter='Ho [ppm]' then m.value END) AS 'Ho',
max(CASE WHEN m.parameter='Er [ppm]' then m.value END) AS 'Er',
max(CASE WHEN m.parameter='Tm [ppm]' then m.value END) AS 'Tm',
max(CASE WHEN m.parameter='Yb [ppm]' then m.value END) AS 'Yb',
max(CASE WHEN m.parameter='Lu [ppm]' then m.value END) AS 'Lu',
max(CASE WHEN m.parameter='Hf [ppm]' then m.value END) AS 'Hf',
max(CASE WHEN m.parameter='Ta [ppm]' then m.value END) AS 'Ta',
max(CASE WHEN m.parameter='Tl [ppm]' then m.value END) AS 'Tl',
max(CASE WHEN m.parameter='Pb [ppm]' then m.value END) AS 'Pb',
max(CASE WHEN m.parameter='Th [ppm]' then m.value END) AS 'Th',
max(CASE WHEN m.parameter='U [ppm]' then m.value END) AS 'U',
max(CASE WHEN m.parameter='Nd143_Nd144' then m.value END) AS 'Nd143_Nd144',
max(CASE WHEN m.parameter='Sr87_Sr86' then m.value END) AS 'Sr87_Sr86',
max(CASE WHEN m.parameter='Pb206_Pb204' then m.value END) AS 'Pb206_Pb204',
max(CASE WHEN m.parameter='Pb207_Pb204' then m.value END) AS 'Pb207_Pb204',
max(CASE WHEN m.parameter='Pb208_Pb204' then m.value END) AS 'Pb208_Pb204'
FROM 'samples.csv' AS s JOIN 'measurements.csv' AS m ON s.id=m.sample_id
WHERE location_subregion = 'TUTUILA' AND
m.parameter IN ('SiO2 [%]', 'TiO2 [%]', 'Al2O3 [%]', 'Fe2O3 [%]', 'FeO [%]',
'MnO [%]', 'MgO [%]', 'CaO [%]', 'Na2O [%]', 'K2O [%]',
'Li [ppm]', 'Sc [ppm]', 'Ti [ppm]', 'V [ppm]',
'Cr [ppm]', 'Co [ppm]', 'Ni [ppm]', 'Cu [ppm]', 'Zn [ppm]', 'As [ppm]',
'Rb [ppm]', 'Sr [ppm]', 'Y [ppm]', 'Zr [ppm]', 'Nb [ppm]', 'Cd [ppm]',
'Cs [ppm]', 'Ba [ppm]', 'La [ppm]', 'Ce [ppm]', 'Pr [ppm]', 'Nd [ppm]',
'Sm [ppm]', 'Eu [ppm]', 'Gd [ppm]', 'Tb [ppm]', 'Dy [ppm]', 'Ho [ppm]',
'Er [ppm]', 'Tm [ppm]', 'Yb [ppm]', 'Lu [ppm]', 'Hf [ppm]', 'Ta [ppm]',
'Tl [ppm]', 'Pb [ppm]', 'Th [ppm]', 'U [ppm]', 'Nd143_Nd144', 'Sr87_Sr86',
'Pb206_Pb204', 'Pb207_Pb204', 'Pb208_Pb204') GROUP BY sample_id") %>%
Ti_from_TiO2() %>% K_from_K2O() %>% Fe2O3_from_FeO()
#### Fig S18 ####
OIB <- q36
OIB %>% group_by(site_name) %>% tally() %>% print(n=30)
OIB <- OIB %>%
dplyr::mutate(Category = case_when(
grepl("Artefact", sample_comment) ~ "artefact",
sample_category == "SOURCE" ~ "source",
sample_category == "ARTEFACT" ~ "artefact")) %>%
dplyr::mutate(Location = case_when(
site_name == "Tatagamatau" & Category == "source" ~ "Tatagamatau-source",
site_name == "Tatagamatau" & Category == "artefact" ~ "Tatagamatau-artefact",
grepl("MALAELOA", Sample) & Category == "source" ~ "Malaeloa-source",
grepl("MALAELOA", Sample) & Category == "artefact" ~ "Malaeloa-artefact",
grepl("MALOATA", Sample) & Category == "source" ~ "Maloata-source",
grepl("MALOATA", Sample) & Category == "artefact" ~ "Maloata-artefact",
TRUE ~ "Tutuila")) %>%
dplyr::select(
Sample,Location,Category,lat,long,SiO2,TiO2,Al2O3,Fe2O3,MnO,MgO,CaO,Na2O,K2O,
Li,Sc,Ti,V,Cr,Co,Ni,Cu,Zn,As,Rb,Sr,Y,Zr,Nb,Cd,Cs,Ba,La,Ce,Pr,Nd,
Sm,Eu,Gd,Tb,Dy,Ho,Er,Tm,Yb,Lu,Hf,Ta,Pb,Th,U,K,
Sr87_Sr86,Nd143_Nd144,Pb206_Pb204,Pb207_Pb204,Pb208_Pb204)
OIB %>% dplyr::select(Sample, Location, Category)
OIB[OIB == 0] <- NA # Replace 0 with NA
#### Fig S18 ####
OIB <- q36
OIB %>% group_by(site_name) %>% tally() %>% print(n=30)
OIB <- OIB %>%
dplyr::mutate(Category = case_when(
grepl("Artefact", sample_comment) ~ "artefact",
sample_category == "SOURCE" ~ "source",
sample_category == "ARTEFACT" ~ "artefact")) %>%
dplyr::mutate(Location = case_when(
site_name == "Tatagamatau" & Category == "source" ~ "Tatagamatau-source",
site_name == "Tatagamatau" & Category == "artefact" ~ "Tatagamatau-artefact",
grepl("MALAELOA", Sample) & Category == "source" ~ "Malaeloa-source",
grepl("MALAELOA", Sample) & Category == "artefact" ~ "Malaeloa-artefact",
grepl("MALOATA", Sample) & Category == "source" ~ "Maloata-source",
grepl("MALOATA", Sample) & Category == "artefact" ~ "Maloata-artefact",
TRUE ~ "Tutuila"))
OIB %>% dplyr::select(Sample, Location, Category)
OIB[OIB == 0] <- NA # Replace 0 with NA
OIB[order(OIB$Nb, decreasing = TRUE), ] %>% select("Sample","Location","Nb")
